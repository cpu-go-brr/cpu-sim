//Autogenerated header for the Intel4004
#pragma once

#include <string>
#include <map>
#include <vector>

#include "AddressInfo.hpp"
#include "AddressInfos.hpp"
#include "bitset.hpp"

class Intel4004
{
   public:   //our internal CPU memory (registers, PC ..)
   uint8_t memory[17] = {};

   Intel4004();

   //function pointer
   typedef void (Intel4004::*op)();

void simulate(std::size_t bytes = 1);
void display();
bitset fetch();
/* rom */
bitset rom_mem[4096];
bitset& rom(AddressInfo info);
bitset& rom(bitset index);
void flash_rom(std::vector<bitset> data);

/* ram */
bitset ram_mem[2048];
bitset& ram(AddressInfo info);
bitset& ram(bitset index);
void flash_ram(std::vector<bitset> data);

/* ram_status */
bitset ram_status_mem[512];
bitset& ram_status(AddressInfo info);
bitset& ram_status(bitset index);
void flash_ram_status(std::vector<bitset> data);

/* ram_port */
bitset ram_port_mem[32];
bitset& ram_port(AddressInfo info);
bitset& ram_port(bitset index);
void flash_ram_port(std::vector<bitset> data);

/* rom_port */
bitset rom_port_mem[16];
bitset& rom_port(AddressInfo info);
bitset& rom_port(bitset index);
void flash_rom_port(std::vector<bitset> data);

std::string bin(AddressInfo info);
std::string hex(AddressInfo info);
std::string dec(AddressInfo info);
   //functions
   bitset get(AddressInfo info);
   void set(AddressInfo info, bitset data);
   void set(std::vector<AddressInfo> infos, bitset data);
   void set(bitset& dest, bitset data);
   template <std::size_t C>
   void nop();
   template <std::size_t C>
   void jcn();
   template <std::size_t C>
   void fim();
   template <std::size_t C>
   void src();
   template <std::size_t C>
   void fin();
   template <std::size_t C>
   void jin();
   template <std::size_t C>
   void jun();
   template <std::size_t C>
   void jms();
   template <std::size_t C>
   void inc();
   template <std::size_t C>
   void isz();
   template <std::size_t C>
   void add();
   template <std::size_t C>
   void sub();
   template <std::size_t C>
   void ld();
   template <std::size_t C>
   void xch();
   template <std::size_t C>
   void bbl();
   template <std::size_t C>
   void ldm();
   template <std::size_t C>
   void wrm();
   template <std::size_t C>
   void wmp();
   template <std::size_t C>
   void wrr();
   template <std::size_t C>
   void wr0();
   template <std::size_t C>
   void wr1();
   template <std::size_t C>
   void wr2();
   template <std::size_t C>
   void wr3();
   template <std::size_t C>
   void sbm();
   template <std::size_t C>
   void rdm();
   template <std::size_t C>
   void rdr();
   template <std::size_t C>
   void adm();
   template <std::size_t C>
   void rd0();
   template <std::size_t C>
   void rd1();
   template <std::size_t C>
   void rd2();
   template <std::size_t C>
   void rd3();
   template <std::size_t C>
   void clb();
   template <std::size_t C>
   void clc();
   template <std::size_t C>
   void cmc();
   template <std::size_t C>
   void stc();
   template <std::size_t C>
   void cma();
   template <std::size_t C>
   void iac();
   template <std::size_t C>
   void dac();
   template <std::size_t C>
   void ral();
   template <std::size_t C>
   void rar();
   template <std::size_t C>
   void tcc();
   template <std::size_t C>
   void daa();
   template <std::size_t C>
   void tcs();
   template <std::size_t C>
   void kbp();
   template <std::size_t C>
   void dcl();


std::map<std::size_t, Intel4004::op> ops;
};