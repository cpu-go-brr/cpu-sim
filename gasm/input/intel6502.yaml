name: Intel6502
# description: The Intel 4004 is a 4-bit central processing unit (CPU) released by Intel Corporation in 1971

memory:
  internal:
    PC: 16
    AC: 8
    XX: 8
    YY: 8
    SR:
      N: 1
      V: 1
      IGF: 1
      BF:	1
      DF:	1
      IF:	1
      ZF:	1
      CF:	1

    SP: 8
  external:
    rom:
      words: 4096
      bits: 8
    ram:
      words: 2048
      bits: 4
    ram_status:
      words: 512
      bits: 4
    ram_port:
      words: 32
      bits: 4
    rom_port:
      words: 16
      bits: 4

fetch:
  conditions:
  instructions:
    - "rom(PC)"

instructions:
  # ORA
  ora_immediate:
    code: 00001001
    asm: 00001001 AAAAAAAA
    instructions:
      - AC | rom(PC+1) --> AC
      - PC+2 --> PC
      - (AC & 128) > 0 --> NF
      - (AC == 0) --> ZF
  ora_zeropage:
    code: 00000101
    asm: 00000101 AAAAAAAA
    instructions:
      - A | rom(rom(PC+1)) --> A
      - PC+2 --> PC
  ora_zeropage_x:
    code: 00010101
    asm: 00010101 AAAAAAAA
    instructions:
      - A | rom(rom(PC+1)+XX) --> A
      - PC+2 -->
  ora_absolute:
    code: 00001101
    asm: 00001101 AAAAAAAA AAAAAAAA
    instructions:
      - A | (rom(PC+2),rom(PC+1)) --> A
      - PC+3 --> PC
  ora_absolute_x:
    code: 00011101
    asm: 00011101 AAAAAAAA AAAAAAAA
    instructions:
      - A | (rom(rom(PC+2)+XX),rom(rom(PC+1)+XX)) --> A
      - PC+3 --> PC
  ora_absolute_y:
    code: 00011001
    asm: 00011001 AAAAAAAA AAAAAAAA
    instructions:
      - A | (rom(rom(PC+2)+YY),rom(rom(PC+1)+YY)) --> A
      - PC+3 --> PC
  ora_indirect_x:
    code: 00000001
    asm: 00000001 AAAAAAAA
    instructions:
      - A | (rom(rom(rom(PC+2)+XX)),rom(rom(rom(PC+1)+XX)) --> A
      - PC+2 --> PC
  ora_indirect_y:
    code: 00010001
    asm: 00010001 AAAAAAAA
    instructions:
      - A | (rom(rom(rom(PC+2)+YY)),rom(rom(rom(PC+1)+YY)) --> A
      - PC+2 --> PC

  # ADC
  ora_immediate:
    code: 01101001
    asm: 01101001 AAAAAAAA
    instructions:
      - A + M + C -> A, C
      - PC+2 --> PC
  # ora_zeropage
  # ora_zeropage_x
  # ora_absolute
  # ora_absolute_x
  # ora_absolute_y
  # ora_indirect_x
  # ora_indirect_y



# display: |
#   "         STACK                REGISTERS\n\
#        PC 0x{PC}          R0 R1 0x{R0} 0x{R1}   R8 R9 0x{R8} 0x{R9}\n\
#   LEVEL 1 0x{STACK0}          R2 R3 0x{R2} 0x{R3}   RA RB 0x{R10} 0x{R11}\n\
#   LEVEL 2 0x{STACK1}          R4 R5 0x{R4} 0x{R5}   RA RB 0x{R12} 0x{R13}\n\
#   LEVEL 3 0x{STACK2}          R6 R7 0x{R6} 0x{R7}   RA RB 0x{R14} 0x{R15}\n\
#   \n\
#   ACCUMULATOR: {ACC} [0b{ACC}]  CARRY: 0b{CY}\n"